<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Competency Test QR Code Access</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
        }
        /* Custom styles for the static QR code container */
        #static-qr-container {
            padding: 16px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            display: inline-block; /* Keeps the background tight around the code */
        }
        #static-qrcode-image {
            /* Ensures the image fits well and looks crisp */
            width: 256px;
            height: 256px;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Main Card Container - Handles both Login and QR Code View -->
    <div class="w-full max-w-lg bg-white rounded-xl shadow-2xl p-6 md:p-10 border border-gray-100">

        <!-- 1. LOGIN VIEW (Initial View) -->
        <div id="login-view">
            <h1 class="text-3xl font-bold text-gray-900 mb-6 text-center">
                Access Competency Test QR
            </h1>
            <p class="text-center text-gray-500 mb-8">
                Please enter the required passcode to view the QR code.
            </p>
            
            <!-- We prevent default form submission and call handleLogin() -->
            <form id="login-form" class="space-y-6" onsubmit="event.preventDefault(); handleLogin();">
                <div>
                    <label for="passcode" class="block text-sm font-medium text-gray-700 mb-2">Passcode</label>
                    <input type="password" id="passcode" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-150 ease-in-out"
                           placeholder="Enter passcode here">
                </div>

                <!-- Error Message Area -->
                <div id="error-message" class="text-red-600 font-medium text-sm text-center hidden p-2 bg-red-50 rounded-lg">
                    Incorrect passcode. Please try again.
                </div>

                <button type="submit" 
                        class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out">
                    Access Code
                </button>
            </form>
        </div>
        
        <!-- 2. QR CODE VIEW (Hidden initially, shown after successful login) -->
        <div id="qr-view" class="hidden">
            <h1 class="text-3xl font-bold text-gray-900 mb-2 text-center">
                Competency Test QR Code
            </h1>
            <p class="text-center text-gray-500 mb-8">
                Scan the QR code below to access the test portal.
            </p>

            <!-- Static QR Code Image Display Area -->
            <div class="flex justify-center mb-8">
                <div id="static-qr-container">
                    <!-- The uploaded image is now used here -->
                    <img id="static-qrcode-image" src="https://raw.githubusercontent.com/mysan4938-oss/CompetencyTest/refs/heads/main/download.png" alt="Competency Test QR Code" class="rounded-lg">
                </div>
            </div>

            <!-- Encoded Data Display -->
            <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4 text-sm">
                <h2 class="font-semibold text-indigo-700 mb-2">Encoded Information:</h2>
                <pre id="encoded-data" class="whitespace-pre-wrap text-indigo-800 leading-relaxed"></pre>
            </div>
        </div>

    </div>
    
    <script>
        // Constants
        const CORRECT_PASSCODE = "tm98";
        // This text is NOT encoded in the QR code, but is displayed on the screen for context.
        const ENCODED_DATA_TEXT = 
            "Title: Competency Test Answers\n" +
            "Date: 21 Nov, 2025"; 

        // DOM Elements
        const loginView = document.getElementById('login-view');
        const qrView = document.getElementById('qr-view');
        const passcodeInput = document.getElementById('passcode');
        const errorMessage = document.getElementById('error-message');
        const encodedDataElement = document.getElementById('encoded-data');

        // Function to handle the login process
        function handleLogin() {
            const enteredPasscode = passcodeInput.value.trim();

            if (enteredPasscode === CORRECT_PASSCODE) {
                // Successful Login
                loginView.classList.add('hidden');
                qrView.classList.remove('hidden');
                errorMessage.classList.add('hidden');
                
                // Display the encoded text for user verification
                encodedDataElement.textContent = ENCODED_DATA_TEXT;

            } else {
                // Failed Login
                errorMessage.classList.remove('hidden');
                passcodeInput.value = ''; // Clear the input field for security
                passcodeInput.focus();
            }
        }
        
    </script>

</body>
</html>

